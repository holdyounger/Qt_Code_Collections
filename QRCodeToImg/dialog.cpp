#include "dialog.h"
#include "ui_dialog.h"

#include <QTimer>

Dialog::Dialog(QWidget *parent)
    : QDialog(parent)
    , ui(new Ui::Dialog)
{
    ui->setupUi(this);

    QTimer *tim = new QTimer(this);
    connect(tim,SIGNAL(timeout()),this,SLOT(update()));
    tim->start(30);
}

Dialog::~Dialog()
{
    delete ui;
}


void Dialog::paintEvent(QPaintEvent *event)
{

    QString strBase = "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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==";

    QPixmap pixQR;

    pixQR.loadFromData(QByteArray::fromBase64(strBase.toLatin1()));

    static int rat = 0;
    rat = rat >= 360 ? 0 : rat + 1;
    int imageWidth = pixQR.width();
    int imageHeight = pixQR.height();
    QPixmap temp(pixQR.size());
    temp.fill(Qt::transparent);
    QPainter  painter(&temp);
    painter.setRenderHint(QPainter::SmoothPixmapTransform, true);
    painter.translate(imageWidth / 2, imageHeight / 2); //让图片的中心作为旋转的中心
    painter.rotate(rat); //顺时针旋转1度
    painter.translate(-(imageWidth / 2), -(imageHeight / 2)); //使原点复原
    painter.drawPixmap(0, 0, pixQR);
    painter.end();
   // ui->label->setPixmap(temp);


    ui->labelQR->setPixmap(temp);
}
